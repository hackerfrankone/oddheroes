<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Odd Heroes</title>
  <link rel="icon" type="image/png" href="/oddheroes/images/OHO.png" />
  <style>
    /* Keep your existing styles */
  </style>
  <!-- Keep your password chunk scripts -->
</head>
<body>
  <!-- Keep your existing HTML -->
  <!-- Load hero GUI files -->
  <script src="/heroes/creatures/chicken/GUI.js"></script>
  <!-- ... other hero scripts ... -->
  <script>
    // Password check (unchanged)
    function checkPassword() { /* ... */ }
    if (localStorage.getItem('oddHeroesAccess') === 'granted') {
      document.getElementById('password-modal').classList.add('hidden');
      document.getElementById('main-content').classList.remove('hidden');
    }
    document.getElementById('password-input').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') checkPassword();
    });

    // Hero-list
    const heroNames = [
      'AI', 'BigFoot', 'Centaur', 'Dinosaur', 'Dragon', 'Fairy', 'Ghost', 'Medusa', 'Merfolk', 'Phoenix',
      'Alchemist', 'Fisherman', 'Hunter', 'Miner', 'Ninja', 'Samurai', 'Spartan', 'Vampire', 'Warrior', 'Wizard',
      'Bear', 'Boar', 'Chicken', 'Dog', 'Duck', 'Falcon', 'Frog', 'HoneyBadger', 'Lizard', 'Mole', 'Raccoon', 'Rat', 'Shark', 'Tiger', 'Turtle',
      'Germ', 'Leech', 'LivingTree', 'Mosquito Swarm', 'Tick', 'Worm', 'Pilot'
    ];

    // Collect hero data
    const heroData = [];
    const categoriesMap = {};
    heroNames.forEach(heroName => {
      const hero = window[`${heroName.replace(/\s+/g, '')}Data`];
      console.log(`Processing ${heroName}:`, hero); // Debug log
      if (!hero) {
        console.error(`Error: Data for ${heroName} not found. Check if GUI.js is loaded.`);
        return;
      }
      const catId = hero.id;
      if (!categoriesMap[catId]) {
        categoriesMap[catId] = { category: hero.category, id: catId, heroes: [] };
        heroData.push(categoriesMap[catId]);
      }
      categoriesMap[catId].heroes.push({
        name: hero.name,
        icon: hero.icon,
        abilities: hero.abilities,
        hp: hero.hp,
        speed: hero.speed,
        tileMove: hero.tileMove,
        passive: hero.passive,
        moveset: hero.moveset || []
      });
    });

    // Log loaded heroes
    console.log('Loaded heroes:', heroData.map(cat => ({
      category: cat.category,
      heroes: cat.heroes.map(h => h.name)
    })));

    // Sort heroes and categories
    heroData.forEach(category => {
      category.heroes.sort((a, b) => a.name.localeCompare(b.name));
    });
    const categoryOrder = ['Legends', 'Creatures', 'Humans', 'Uniques'];
    heroData.sort((a, b) => categoryOrder.indexOf(a.category) - categoryOrder.indexOf(b.category));

    // Render categories
    if (heroData.length === 0) {
      console.error('No hero data loaded.');
      const errorMessage = document.createElement('div');
      errorMessage.style.color = '#f00';
      errorMessage.textContent = 'Error loading hero data.';
      document.body.appendChild(errorMessage);
    } else {
      const categoriesContainer = document.getElementById('categories');
      const modalsContainer = document.getElementById('modals');
      const selectedHeroesDiv = document.getElementById('selected-heroes');
      const startButton = document.getElementById('start-button');
      let selectedHeroes = [];
      const sessionId = crypto.randomUUID();
      const categories = heroData.map(cat => ({
        title: null,
        list: null,
        selected: null,
        display: null,
        id: cat.id
      }));
      startButton.disabled = true;

      heroData.forEach((cat, index) => {
        console.log(`Rendering category: ${cat.category}, Heroes: ${cat.heroes.map(h => h.name).join(', ')}`);
        const categoryContainer = document.createElement('div');
        categoryContainer.className = 'category-container';
        const categoryTitle = document.createElement('div');
        categoryTitle.className = 'category-title';
        categoryTitle.id = `${cat.id}-title`;
        categoryTitle.innerHTML = `<span class="selected-hero"></span>${cat.category}`;
        const gridContainer = document.createElement('div');
        gridContainer.className = 'grid-container';
        gridContainer.id = `${cat.id}-list`;
        cat.heroes.forEach(hero => {
          const heroTile = document.createElement('div');
          heroTile.className = 'hero-tile';
          heroTile.innerHTML = `<div class="hero-icon">${hero.icon}</div>${hero.name}`;
          gridContainer.appendChild(heroTile);
        });
        categoryContainer.appendChild(categoryTitle);
        categoryContainer.appendChild(gridContainer);
        categoriesContainer.appendChild(categoryContainer);
        categories[index].title = categoryTitle;
        categories[index].list = gridContainer;
        categories[index].display = categoryTitle.querySelector('.selected-hero');
        // ... rest of modal and event listener code (unchanged)
      });
      // ... rest of your script (unchanged)
    }
  </script>
</body>
</html>
